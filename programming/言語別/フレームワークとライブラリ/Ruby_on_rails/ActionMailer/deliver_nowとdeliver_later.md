## deliver_nowとdeliver_later

**`deliver_now`**と**`deliver_later`**は、Ruby on Railsの**`ActionMailer`**ライブラリで提供されているメソッドで、アプリケーションからメールを送信する際に使用されます。これらのメソッドは、メール送信のタイミングと処理の方法を制御するために用いられます。

### **deliver_now**

- **機能**: **`deliver_now`**メソッドは、メールを即座に送信します。このメソッドを呼び出すと、メール送信の処理が同期的に実行され、メール送信の処理が完了するまで次の行のコードの実行に移りません。
- **使いどころ**: ユーザーが何らかのアクションを行った直後にメールの確認が必要な場合（例えば、アカウントの確認メールやパスワードリセットメールなど）に適しています。ユーザーがすぐにメールを受け取ることを期待するシナリオで使用します。

### **deliver_later**

- **機能**: **`deliver_later`**メソッドは、メールを非同期で送信します。具体的には、メール送信の処理をRailsのバックグラウンドジョブ（Active Job）のキューに追加し、実際のメール送信はバックグラウンドプロセスで後ほど行われます。このメソッドを使用すると、メール送信の処理を待たずにすぐに次の処理に移ることができます。
- **使いどころ**: メール送信の処理に時間がかかる場合や、ユーザーの操作のレスポンスタイムに影響を与えたくない場合（例えば、ユーザー登録後のウェルカムメール送信や、大量のメールを一斉送信する場合など）に適しています。ユーザーの体験を優先して、メール送信処理をバックグラウンドで実行したいシナリオで使用します。

### **使用例**

```ruby
rubyCopy code
# 即時にメールを送信
UserMailer.welcome_email(user).deliver_now

# メールを非同期で送信（バックグラウンドジョブに追加）
UserMailer.welcome_email(user).deliver_later

```

### **選択基準**

- **即時性が重要な場合**は**`deliver_now`**を使用します。ユーザーが直接的なフィードバックを期待している場面で、遅延なくメールを送信する必要がある時に適しています。
- **パフォーマンスやユーザー体験を優先する場合**は**`deliver_later`**を使用します。メール送信による処理時間がアプリケーションのレスポンスに影響を与えるのを避けたい場合や、大量のメール送信が必要な場合に適しています。

**`deliver_later`**を使用する際は、Active Jobのバックエンド（Sidekiq、Resque、Delayed::Jobなど）が設定されていることを確認してください。これにより、バックグラウンドでのジョブ処理が適切に行われます。