## 1.day.ago.all_day

`1.day.ago.all_day`という式は、Ruby on RailsのActive Supportコア拡張機能を使用しています。この式は、現在の時刻からちょうど1日前の全日（0時から23時59分59秒まで）の時間範囲を表します。ここでは、この式を構成する各メソッドの説明を行います。

### 1. `1.day`

- `day`メソッド: `Numeric`クラスに対するActive Supportの拡張機能です。このメソッドは、数値を日数として解釈し、その数値に対応する秒数を表す`ActiveSupport::Duration`オブジェクトを返します。`1.day`は、1日分の秒数（24時間 * 60分 * 60秒 = 86400秒）を含む`ActiveSupport::Duration`オブジェクトを生成します。

### 2. `1.day.ago`

- `ago`メソッド: `ActiveSupport::Duration`オブジェクトに対するメソッドで、呼び出された時間（この場合は1日）分、現在時刻から遡った`DateTime`オブジェクトを返します。例えば、`1.day.ago`は現在時刻から24時間前の時刻を表します。このメソッドは、過去の特定の時点を簡単に計算するために便利です。

### 3. `1.day.ago.all_day`

- `all_day`メソッド: `DateTime`または`Date`オブジェクトに対するActive Supportの拡張機能です。このメソッドは、指定された日付の開始時刻（0時0分0秒）から終了時刻（23時59分59秒）までの範囲を表す`Range`オブジェクトを返します。`1.day.ago.all_day`は、現在時刻から1日前の全日をカバーする時間範囲を生成します。

この式は、たとえば、データベースから前日のデータを全て取得する際にクエリの条件として使用することができます。例えば、あるイベントのレコードが特定の日にどれだけ存在するかを調べたい場合などに便利です。

```ruby

Event.where(created_at: 1.day.ago.all_day)

```

このクエリは、現在時刻からちょうど1日前の日の0時0分0秒から23時59分59秒までに作成されたイベントのレコードをすべて取得します。